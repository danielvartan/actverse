<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Read, tidy, and validate an ActTrust file — read_acttrust • actverse</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Read, tidy, and validate an ActTrust file — read_acttrust"><meta property="og:description" content="
read_acttrust() allows you to read, tidy, and validate an ActTrust file in
a consistent and easy manner. You can see the output data structure in
?acttrust.
ActTrust is a trademark of
Condor Instruments Ltda."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-3FSQE6ZG2N"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3FSQE6ZG2N');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">actverse</a>
        <span class="version label label-warning" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/gipso/actverse/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read, tidy, and validate an ActTrust file</h1>
    <small class="dont-index">Source: <a href="https://github.com/gipso/actverse/blob/HEAD/R/read_acttrust.R" class="external-link"><code>R/read_acttrust.R</code></a></small>
    <div class="hidden name"><code>read_acttrust.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p><code>read_acttrust()</code> allows you to read, tidy, and validate an ActTrust file in
a consistent and easy manner. You can see the output data structure in
<code><a href="acttrust.html">?acttrust</a></code>.</p>
<p>ActTrust is a trademark of
<a href="https://www.condorinst.com.br/" class="external-link">Condor Instruments Ltda</a>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">read_acttrust</span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.choose.html" class="external-link">file.choose</a></span><span class="op">(</span><span class="op">)</span>, tz <span class="op">=</span> <span class="st">"UTC"</span>, regularize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>file</dt>
<dd><p>A string with the file path for the ActTrust data. If not
assigned, a dialog window will open allowing the user to browse and select
a file.</p></dd>
<dt>tz</dt>
<dd><p>A string that specifies which time zone to parse the dates/time
with. The string must be a time zone that is recognized by the user's OS.
For more information see <code><a href="https://rdrr.io/r/base/timezones.html" class="external-link">?timezone</a></code> (default: <code>"UTC"</code>).</p></dd>
<dt>regularize</dt>
<dd><p>(optional) a <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> value indicating if the
function must correct irregular intervals (<strong>highly recommended</strong>). See
more about it in the Details section (default: <code>TRUE</code>).</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <a href="https://tsibble.tidyverts.org/reference/tsibble.html" class="external-link">tsibble</a> object. The data structure can be
found in <code><a href="acttrust.html">?acttrust</a></code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    
<div class="section">
<h3 id="requirements">Requirements<a class="anchor" aria-label="anchor" href="#requirements"></a></h3>


<p><code>read_acttrust()</code> requires the <code><a href="https://readr.tidyverse.org/reference/readr-package.html" class="external-link">readr</a></code> package. If
you don't already have it installed, you can install it with:</p><div class="sourceCode"><pre><code><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"readr"</span><span class="op">)</span></code></pre></div>

</div>

<div class="section">
<h3 id="regularize-parameter"><code>Regularize</code> parameter<a class="anchor" aria-label="anchor" href="#regularize-parameter"></a></h3>


<p>It's common to find some uneven epochs/intervals in ActTrust data files. This
occurs because the actigraph internal clock can go off by some seconds while
recording and can become an issue while doing some computations. By using
<code>regularize == TRUE</code>, <code>read_acttrust()</code> find and correct those
irregularities.</p>
<p>It's important to note that this process will only work if a clear
epoch/periodicity can be found in the data. Regularization is made by
aggregating the values between epochs, averaging values for numeric variables
and assigning the most frequent value (mode) for single integer or other type
of variables.</p>
<p>Any gap found in the time series will be assign as <code>NA</code>, with a <code>state</code>
value of <code>9</code>.</p>
</div>

<div class="section">
<h3 id="offwrist-data">Offwrist data<a class="anchor" aria-label="anchor" href="#offwrist-data"></a></h3>


<p><code>read_acttrust()</code> will transform any offwrist data (data with
<code>state == 4</code>) into missing data (<code>NA</code>). They will still going to be
classified as offwrist in the <code>state</code> variable.</p>
</div>

<div class="section">
<h3 id="data-wrangling">Data wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"></a></h3>


<p>The process of <em>tiding</em> a dataset is understood as transforming it in input
data, like described in Loo and Jonge (2018). It's a very similar process of
tiding data described in the workflow proposed by Wickham and Grolemund
(n.d.).</p>
<p>The process of <em>validating</em> a dataset is understood as detecting invalid
data, by checking whether data satisfies certain assumptions from domain
knowledge, to then,  removing or, if possible, fixing them. This process can
be considered as part of the process of transforming data, described in the
workflow proposed by Wickham and Grolemund (n.d.).</p>
<p>To learn more about the concept of tidy data, see Wickham (2014) and Wickham
and Grolemund (n.d.). You can find more about data validation and error
location in Loo and Jonge (2018).</p>
</div>

    </div>
    <div id="references">
    <h2>References</h2>
    <p>Van der Loo, M., &amp; De Jonge, E. (2018).
<em>Statistical data cleaning with applications in R</em>. Hooboken, NJ: John
Wiley &amp; Sons. <a href="https://doi.org/10.1002/9781118897126" class="external-link">doi:10.1002/9781118897126</a>
.</p>
<p>Wickham, H. (2014). Tidy Data. <em>Journal of Statistical Software</em>, <em>59</em>(10),
1-23. <a href="https://doi.org/10.18637/jss.v059.i10" class="external-link">doi:10.18637/jss.v059.i10</a>
.</p>
<p>Wickham, H., &amp; Grolemund, G. (n.d.). <em>R for data science</em>. Sebastopol, CA:
O'Reilly Media. <a href="https://r4ds.had.co.nz" class="external-link">https://r4ds.had.co.nz</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other utility functions: 
<code><a href="aggregate_index.html">aggregate_index</a>()</code>,
<code><a href="find_epoch.html">find_epoch</a>()</code>,
<code><a href="raw_data.html">raw_data</a>()</code>,
<code><a href="write_acttrust.html">write_acttrust</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu">read_acttrust</span><span class="op">(</span><span class="fu"><a href="raw_data.html">raw_data</a></span><span class="op">(</span><span class="st">"acttrust.txt"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Reading data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Reading data <span style="color: #B2B2B2;">[20ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Tidying data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Tidying data <span style="color: #B2B2B2;">[86ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Validating data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Validating data <span style="color: #B2B2B2;">[712ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tsibble: 1,441 x 17 [1m] &lt;UTC&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    timestamp             pim   tat   zcm orientation wrist_temperature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2021-04-24 <span style="color: #949494;">04:14:00</span>  <span style="text-decoration: underline;">7</span>815   608   228           0              26.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2021-04-24 <span style="color: #949494;">04:15:00</span>  <span style="text-decoration: underline;">2</span>661   160    64           0              27.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2021-04-24 <span style="color: #949494;">04:16:00</span>  <span style="text-decoration: underline;">3</span>402   243    80           0              27.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2021-04-24 <span style="color: #949494;">04:17:00</span>  <span style="text-decoration: underline;">4</span>580   317   125           0              27.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2021-04-24 <span style="color: #949494;">04:18:00</span>  <span style="text-decoration: underline;">2</span>624   255    33           0              28.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2021-04-24 <span style="color: #949494;">04:19:00</span>  <span style="text-decoration: underline;">3</span>929   246   105           0              28.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2021-04-24 <span style="color: #949494;">04:20:00</span>  <span style="text-decoration: underline;">5</span>812   369   171           0              28.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2021-04-24 <span style="color: #949494;">04:21:00</span>  <span style="text-decoration: underline;">3</span>182   270    54           0              28.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2021-04-24 <span style="color: #949494;">04:22:00</span>  <span style="text-decoration: underline;">6</span>362   373   189           0              28.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2021-04-24 <span style="color: #949494;">04:23:00</span>  <span style="text-decoration: underline;">2</span>621   159    64           0              28.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 1,431 more rows, and 11 more variables: external_temperature &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   light &lt;dbl&gt;, ambient_light &lt;dbl&gt;, red_light &lt;dbl&gt;, green_light &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   blue_light &lt;dbl&gt;, ir_light &lt;dbl&gt;, uva_light &lt;dbl&gt;, uvb_light &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   event &lt;dbl&gt;, state &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/danielvartan" class="external-link">Daniel Vartanian</a>, <a href="https://github.com/matiasvinicius" class="external-link">Vinicius Alves Matias</a>, <a href="https://github.com/cassioserrano" class="external-link">Cassio Almeida Mattos Serrano</a>, <a href="https://github.com/AnaAmeliaBeneditoSIlva" class="external-link">Ana Amelia Benedito-Silva</a>, <a href="https://github.com/pedrazzo" class="external-link">Mario Pedrazzoli</a>, <a href="http://each.usp.br/gipso" class="external-link">Interdisciplinary Sleep Research Group (GIPSO)</a>, <a href="http://usp.br" class="external-link">University of Sao Paulo (USP)</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

